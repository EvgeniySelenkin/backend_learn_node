# –õ–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–∞—è —Ä–∞–±–æ—Ç–∞ ‚Ññ3

## –¢–µ–º–∞: TypeORM, PostgreSQL.

<br/>

–ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π –±–∞–ª–ª –∑–∞ –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω—É—é —Ä–∞–±–æ—Ç—É -- 10 –±–∞–ª–ª–æ–≤.

## –û–ø–∏—Å–∞–Ω–∏–µ –ª–∞–±—ã:

–í —ç—Ç–æ–π –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–æ–π —Ä–∞–±–æ—Ç–µ –º—ã –ø–æ–∑–Ω–∞–∫–æ–º–∏–º—Å—è —Å –±–∏–±–ª–∏–æ—Ç–µ–∫–æ–π TypeORM. TypeORM –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –Ω–∞–º API –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö. TypeORM —É–ø—Ä–æ—â–∞–µ—Ç —Ä–∞–±–æ—Ç—É —Å –±–∞–∑–æ–π –≤ —Ç–æ–º —Å–º—ã—Å–ª–µ, —á—Ç–æ –Ω–∞–º –Ω–µ –ø—Ä–∏—Ö–æ–¥–∏—Ç—Å—è –≤ –±–æ–ª—å—à–µ–π —á–∞—Å—Ç–∏ —Å–ª—É—á–∞–µ–≤ –ø–∏—Å–∞—Ç—å SQL-–∫–æ–º–∞–Ω–¥—ã —Ä—É–∫–∞–º–∏ -- –º—ã –≤—Å–µ —ç—Ç–æ –¥–µ–ª–∞–µ–º —á–µ—Ä–µ–∑ QueryBuilder -- —Å–æ—Å—Ç–∞–≤–∏—Ç–µ–ª—å SQL –∑–∞–ø—Ä–æ—Å–∞, –∫–æ—Ç–æ—Ä—ã–π —è–≤–ª—è–µ—Ç—Å—è JavaScript-–æ–±—ä–µ–∫—Ç–æ–º.

–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ TypeORM –Ω–∞ —ç—Ç–æ–º –Ω–µ –∑–∞–∫–∞–Ω—á–∏–≤–∞—é—Ç—Å—è. –° –ø–æ–º–æ—â—å—é TypeORM –º—ã –º–æ–∂–µ–º —Ä–∞–±–æ—Ç–∞—Ç—å —Å–æ —Å—Ö–µ–º–æ–π –ë–î, —Å–æ–∑–¥–∞–≤–∞—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏ (—Å–º. –≤ –≥—É–≥–æ–ª–µ), —Å–æ–∑–¥–∞–≤–∞—Ç—å views –∏ –º–Ω–æ–≥–æ–µ –¥—Ä—É–≥–æ–µ. –õ—é–±–∞—è ORM —Å–∏–ª—å–Ω–æ —É–ø—Ä–æ—â–∞–µ—Ç —Ä–∞–±–æ—Ç—É —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö, –∫–æ–≥–¥–∞ –≤—ã –ø–∏—à–∏—Ç–µ –∫–æ–¥ –≤–∞—à–µ–≥–æ –±—ç–∫–µ–Ω–¥–∞ -- TypeORM –Ω–µ –∏—Å–∫–ª—é—á–µ–Ω–∏–µ.

–ó–∞ —ç—Ç—É –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω—É—é —Ä–∞–±–æ—Ç—É –º—ã –¥–æ–ª–∂–Ω—ã –Ω–∞—É—á–∏—Ç—å—Å—è:

1. —Å–æ–∑–¥–∞–≤–∞—Ç—å connection –∫ –±–∞–∑–µ —á–µ—Ä–µ–∑ TypeORM;
2. –ø–æ–∑–Ω–∞–∫–æ–º–∏—Ç—å—Å—è —Å repository-–ø–æ–¥—Ö–æ–¥–æ–º –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å –±–∞–∑–æ–π;
3. –æ—Å–≤–æ–∏—Ç—å –æ—Å–Ω–æ–≤–Ω—ã–µ –º–µ—Ç–æ–¥—ã —É —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–≤ –≤ TypeORM.

## –†–µ—Å—É—Ä—Å—ã:

1. [–ö–∞–∫ –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ –±–∞–∑–µ —á–µ—Ä–µ–∑ TypeORM](https://typeorm.io/#/connection)
2. [Entity –≤ TypeORM](https://typeorm.io/#/entities)
3. [–°–≤—è–∑—ã–≤–∞–Ω–∏–µ —Å—É—â–Ω–æ—Å—Ç–µ–π —á–µ—Ä–µ–∑ —Ä–µ–ª—è—Ü–∏–∏](https://typeorm.io/#/relations)
4. [–†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –≤ TypeORM](https://typeorm.io/#/working-with-repository)
5. [Repository API](https://typeorm.io/#/repository-api)
6. [–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å—Ö–µ–º—ã –ë–î –≤ TypeORM](https://github.com/typeorm/typeorm/blob/master/docs/faq.md#how-do-i-update-a-database-schema)

## ‚ùóÔ∏è <b>–ü–µ—Ä–µ–¥ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ–º</b>:

1. –ø—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —É –≤–∞—Å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω npm –Ω–∞ –º–∞—à–∏–Ω–µ (–º–æ–∂–Ω–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å –∫–æ–º–∞–Ω–¥—É npm -v);
2. –∫–æ–≥–¥–∞ —Å–∫–ª–æ–Ω–∏—Ä—É–µ—Ç–µ —ç—Ç–æ—Ç —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –∑–∞–ø—É—Å—Ç–∏—Ç–µ –∫–æ–º–∞–Ω–¥—ã: npm i -g yarn (—É—Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –≥–ª–æ–±–∞–ª—å–Ω–∞—è –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è yarn), –∑–∞—Ç–µ–º yarn install (—É—Å—Ç–∞–Ω–æ–≤—è—Ç—Å—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –¥–ª—è –ø—Ä–æ–µ–∫—Ç–∞);
3. <b>—á—Ç–æ–±—ã –∑–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–æ–µ–∫—Ç –Ω–∞–ø–∏—à–∏—Ç–µ yarn start, –¥–æ–ª–∂–µ–Ω –æ—Ç–∫—Ä—ã—Ç—å—Å—è –±—Ä–∞—É–∑–µ—Ä –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ localhost:3000</b>

## –ó–∞–¥–∞–Ω–∏—è:

‚úÖ –°–æ–∑–¥–∞–π—Ç–µ –±–µ—Å–ø–ª–∞—Ç–Ω—É—é –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö –Ω–∞ —Ä–µ—Å—É—Ä—Å–µ Elephant SQL:

1. –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å, —Å–æ–∑–¥–∞–π—Ç–µ –±–µ—Å–ø–ª–∞—Ç–Ω—É—é –±–∞–∑—É, –≤–æ–∑—å–º–∏—Ç–µ –æ—Ç –Ω–µ–µ –∫—Ä–µ–¥—ã. –î–ª—è —ç—Ç–æ–π –ª–∞–±—ã –Ω–∞–º –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è —Ç–æ–ª—å–∫–æ URL -- —Ä–∞–∑–±–µ—Ä–∏—Ç–µ—Å—å —á—Ç–æ —Ç–∞–∫–æ–µ database url –∏ –∏–∑ —á–µ–≥–æ –æ–Ω —Å–æ—Å—Ç–æ–∏—Ç.

üîé –ö—Ä–∏—Ç–µ—Ä–∏–π –ø—Ä–∏–µ–º–∫–∏: —É –≤–∞—Å –µ—Å—Ç—å –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –Ω–∞ Elephant SQL.

‚úÖ –°–æ–∑–¥–∞–π—Ç–µ TypeORM connection –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö —Å –ø–æ–º–æ—â—å—é environment variable DB_URL:

1. –Ω–∞—É—á–∏—Ç–µ—Å—å –∑–∞–¥–∞–≤–∞—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –¥–ª—è —Å–≤–æ–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞ -- –∫—Ä–µ–¥—ã –æ—Ç –Ω–∞—à–µ–π –ë–î —ç—Ç–æ sensitive –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è, –∫–æ—Ç–æ—Ä—É—é –º—ã –¥–æ–ª–∂–Ω—ã —Å–∫—Ä—ã–≤–∞—Ç—å –∏ –Ω–µ —Ö—Ä–∞–Ω–∏—Ç—å –≤ –∫–æ–¥–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è;
2. —Å–æ–∑–¥–∞–π—Ç–µ TypeORM connection –∫ –≤–∞—à–µ–π –±–¥, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ database url –∏–∑ –ø–µ—Ä–≤–æ–≥–æ –ø—É–Ω–∫—Ç–∞. –î–µ–ª–∞–π—Ç–µ —ç—Ç—É —á–∞—Å—Ç—å –≤ —Ñ–∞–π–ª–µ database/database.config.ts

üîé –ö—Ä–∏—Ç–µ—Ä–∏–π –ø—Ä–∏–µ–º–∫–∏: –≤—ã –∑–Ω–∞–µ—Ç–µ —á—Ç–æ —Ç–∞–∫–æ–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –∏ –º–æ–∂–µ—Ç–µ —Å–æ–∑–¥–∞—Ç—å —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —Å –≤–∞—à–µ–π –ë–î —á–µ—Ä–µ–∑ TypeORM.

‚úÖ –°–æ–∑–¥–∞–π—Ç–µ Entities –¥–ª—è User –∏ Post:

1. –∑–∞–º–µ–Ω–∏—Ç–µ type User –∏ type Post –Ω–∞ TypeORM Entities (–¥–ª—è –ø—Ä–∏–º–µ—Ä–∞ —Å–º. user entity);

üîé –ö—Ä–∏—Ç–µ—Ä–∏–π –ø—Ä–∏–µ–º–∫–∏: –≤ –≤–∞—à–µ–π –±–∞–∑–µ –µ—Å—Ç—å —Ç–∞–±–ª–∏—Ü—ã –¥–ª—è —é–∑–µ—Ä–æ–≤ –∏ –ø–æ—Å—Ç–æ–≤.

‚úÖ –ò–∑–º–µ–Ω–∏—Ç—å –º–µ—Ç–æ–¥—ã —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–≤ –∏–∑ 2 –ª–∞–±—ã, —á—Ç–æ–±—ã –æ–Ω–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏ –ë–î, –∞ –Ω–µ —Ç–µ–∫—Å—Ç–æ–≤—ã–π —Ñ–∞–π–ª. –ò –¥–æ–ø–∏—Å–∞—Ç—å –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏–µ –º–µ—Ç–æ–¥—ã (getUserPosts, getPostAuthor):

1. –∏–∑–º–µ–Ω—è–µ—Ç–µ –≤—Å–µ –º–µ—Ç–æ–¥—ã –≤–∞—à–∏—Ö —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–≤ —Ç–∞–∫, —á—Ç–æ–±—ã –Ω–µ –±—ã–ª–æ persistance-—Å–ª–æ—è –≤ —Ñ–∞–π–ª–∞—Ö -- –æ—Ç–Ω—ã–Ω–µ –≤—Å–µ –¥–∞–Ω–Ω—ã–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –ë–î. –ù–µ –æ—Ç–ø—Ä–∞–≤–ª—è–π—Ç–µ "—Å—ã—Ä—ã–µ" –∑–∞–ø—Ä–æ—Å—ã –∫ –±–∞–∑–µ, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ TypeORM entity repository (–æ–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ –Ω–∞ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é –≤ users.repository.ts);
2. –¥–æ–ø–∏—à–∏—Ç–µ –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏–µ –º–µ—Ç–æ–¥—ã –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è—Ö getUserPosts -- —Ö–æ—á—É –≤—Å–µ –ø–æ—Å—Ç—ã —é–∑–µ—Ä–∞; getPostAuthor -- —Ö–æ—á—É –æ–±—ä–µ–∫—Ç —Å –∞–≤—Ç–æ—Ä–æ–º –ø–æ—Å—Ç–∞.
3. **—è —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞—é, —á—Ç–æ –≤—ã –±—É–¥–µ—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –º–µ—Ç–æ–¥—ã —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–≤ (find, findOne, save, update, delete) -- –ø–æ—ç—Ç–æ–º—É —Ç–µ—Å—Ç—ã –±—É–¥—É—Ç –ø—Ä–æ—Ö–æ–¥–∏—Ç—å —Ç–æ–ª—å–∫–æ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º —ç—Ç–∏—Ö –º–µ—Ç–æ–¥–æ–≤.**

üîé –ö—Ä–∏—Ç–µ—Ä–∏–π –ø—Ä–∏–µ–º–∫–∏: –≤–∞—à –∫–æ–¥ –ø—Ä–æ—Ö–æ–¥–∏—Ç –≤—Å–µ —Ç–µ—Å—Ç—ã.
